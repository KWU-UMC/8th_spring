# 2주차 Mission

## 1주차 때 설계한 DB를 토대로 주어진 화면에 대한 쿼리 작성

### 진행중, 진행 완료한 미션 쿼리 (페이징 포함)
(진행중, 진행 완료 창을 따로 확인)
![진행중 미션.png](%EC%A7%84%ED%96%89%EC%A4%91%20%EB%AF%B8%EC%85%98.png)
![완료한 미션.png](%EC%99%84%EB%A3%8C%ED%95%9C%20%EB%AF%B8%EC%85%98.png)
- 유저 id가 1이고 진행중 상태에 있으면 미션을 출력함
- 내림차순 정렬하였고, 한 페이지에 10개씩 출력되도록 함

### 리뷰를 작성하는 쿼리
(사진 제외 평점과 글만 작성)
![리뷰 작성 쿼리.png](%EB%A6%AC%EB%B7%B0%20%EC%9E%91%EC%84%B1%20%EC%BF%BC%EB%A6%AC.png)
- insert를 이용해 리뷰를 삽입함 
- values 괄호 안에는 insert 괄호 안에 있는 정보들의 실제 값이 들어감
- review.user_id와 userinfo.uid가 같으면 유저의 실제 이름을 가지고 옴

### 홈 화면 쿼리 
(현재 선택된 지역에서 도전이 가능한 미션 목록, 페이징 포함)
![홈 화면 쿼리.png](%ED%99%88%20%ED%99%94%EB%A9%B4%20%EC%BF%BC%EB%A6%AC.png)
![완료한 미션 개수.png](%EC%99%84%EB%A3%8C%ED%95%9C%20%EB%AF%B8%EC%85%98%20%EA%B0%9C%EC%88%98.png)
- 현재 선택된 지역에서 도전이 가능한 미션 목록을 불러오기 위해 미션 id, 미션 이름, 미션 설명을 선택
- 미션 테이블 안에 지역을 포함해놨으므로 시, 구, 동과 새로운 미션 조건을 모두 만족하는 미션을 불러옴 (새로운 미션 + 진행중 미션으로 하려면 status에 'progress'를 추가해주면 됨)
- 미션 id를 기준으로 내림차순 정렬함 (최신순 정렬)
- 한 페이지에 10개가 보이도록 함
- 완료한 미션 개수도 같은 원리로 status에 'completed' 를 적용하여 쿼리 작성

### 마이 페이지 화면 쿼리
(이름 수정, 이메일 출력, 휴대폰번호 인증 여부, 내 포인트, 작성한 리뷰, 1:1 문의하기, 알림 설정, 로그아웃 구현)
![마이페이지 화면 쿼리.png](%EB%A7%88%EC%9D%B4%ED%8E%98%EC%9D%B4%EC%A7%80%20%ED%99%94%EB%A9%B4%20%EC%BF%BC%EB%A6%AC.png)
- 마이페이지 화면에 필요한 정보만을 구현 (1:1 문의 기능, 알림 설정 기능 등 구현 X)
- 유저 정보는 모든 데이터를 가져오기 위해 left join을 사용했음