- Domain

  도메인은 시스템이 해결하고자 하는 문제 영역(비즈니스 영역)을 의미하며, 이를 코드로 표현한 것이 도메인 모델이다.

  도메인 모델은 엔티티와 밸류 오브젝트, 그리고 이들의 행동(메서드)으로 구성된다. DDD에서는 도메인 로직을 중심에 두고, 비즈니스 규칙을 객체로 캡슐화하여 설계하는 것을 강조한다. 코드의 재사용성과 유지보수성을 높이기 위해 도메인을 중심으로 구조화하는 것이 중요하다.

- 양방향 매핑

  JPA에서 두 엔티티가 서로를 참조하는 관계를 말하며, 예를 들어@OneToMany 와@ManyToOne을 함께 사용하는 구조다.

  양방향 관계에서는 외래 키를 관리하는 쪽(보통 @ManyToOne이 있는 쪽)을 연관관계의 주인으로 지정해야 한다. 반대편은 mappedBy 속성으로 주인을 지정해주는 비주인이다.

  양방향 매핑은 객체 그래프 탐색이 유연해지지만, 무한 순환 참조나 데이터 불일치 문제를 주의해야 한다.

- N + 1 문제

  JPA에서 컬렉션이나 연관된 엔티티를 지연 로딩(Lazy)할 때, 루프를 돌며 매번 추가 쿼리가 발생하는 성능 이슈다. 예를 들어 회원 목록을 조회한 후, 각 회원의 주문을 반복 조회하면 하나의 쿼리 + N개의 추가 쿼리가 발생한다.

  이를 해결하기 위해 fetch join, @EntityGraph, 혹은 Batch Fetch Size 설정 등을 활용할 수 있다.

  대규모 데이터 조회 시 N+1 문제가 발생하면 심각한 성능 저하를 초래할 수 있으므로 반드시 확인하고 튜닝해야 한다.